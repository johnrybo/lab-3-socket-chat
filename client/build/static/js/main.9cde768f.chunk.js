(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n.n(o),a=n(10),c=n.n(a),r=n(44),i=(n(116),n(53),n(13)),l=n(29),u=n(39),m=n(58),j=n(33),d=n(94),b=n(93),h=n(92),O=n.n(h)()(),f=n(11),g=n(4),x=Object(o.createContext)({getUsername:function(){},createRoom:function(){},handleNewMessage:function(){},sendMessage:function(){},setPassword:function(){},setRoom:function(){},joinRoom:function(){},joinLockedRoom:function(){},resetRoom:function(){},onJoinLockedRoomResponse:function(){}}),p=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(m.a)(this,n);for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={username:"guest",room:{name:"",password:""},rooms:[],messages:[]},e.updateRoomsList=function(t){e.setState({rooms:t})},e.getUsername=function(t){e.setState({username:t})},e.resetRoom=function(t){e.setState({room:t})},e.setRoom=function(t){e.setState({room:Object(u.a)(Object(u.a)({},e.state.room),{},{name:t})})},e.setPassword=function(t){e.setState((function(e){return{room:Object(u.a)(Object(u.a)({},e.room),{},{password:t})}}))},e.joinRoom=function(t){O.emit("join-room",{name:e.state.username,room:t})},e.joinLockedRoom=function(t,n){O.emit("join-room",{name:e.state.username,room:t,passwordPrompt:n})},e.onJoinLockedRoomResponse=function(t){var n=t.success,o=t.room;n?(e.setState({room:o}),e.setState({messages:[]}),e.props.history.push("/"+o.name)):alert("Wrong password!")},e.sendMessage=function(t){O.emit("send-message",{message:t,username:e.state.username,room:e.state.room.name})},e.handleNewMessage=function(t){e.setState({messages:[].concat(Object(l.a)(e.state.messages),[t])})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){O.on("connect",(function(){return console.log("CONNECTED")})),O.on("message",this.handleNewMessage),O.on("all-rooms",this.updateRoomsList),O.on("disconnect",(function(){return console.log("DISCONNECTED")})),O.on("join-locked-room-response",this.onJoinLockedRoomResponse)}},{key:"render",value:function(){return Object(g.jsx)(x.Provider,{value:Object(u.a)(Object(u.a)({},this.state),{},{getUsername:this.getUsername,handleNewMessage:this.handleNewMessage,sendMessage:this.sendMessage,setPassword:this.setPassword,setRoom:this.setRoom,joinRoom:this.joinRoom,joinLockedRoom:this.joinLockedRoom,resetRoom:this.resetRoom,onJoinLockedRoomResponse:this.onJoinLockedRoomResponse}),children:this.props.children})}}]),n}(o.Component),v=Object(f.f)(p),R=n(51),k=n.n(R),C=n(190),w=n(197),N=n(187),y=n(200),S=n(195),J=n(194),L=n(193),P=Object(N.a)((function(e){return{container:{height:"10vh",backgroundColor:"#3f51b5",display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,right:0,zIndex:999},link:{textDecoration:"none"},button:{margin:"1rem",backgroundColor:"aliceblue",fontWeight:"bold"},button2:{margin:"1rem",fontWeight:"bold"},textField:{margin:"1rem"}}})),M=function(){var e=P(),t=Object(o.useState)(!1),n=Object(i.a)(t,2),s=n[0],a=n[1],c=Object(o.useState)(""),r=Object(i.a)(c,2),l=r[0],u=r[1],m=function(){a(!0)},j=Object(o.useContext)(x),d=j.rooms,b=j.joinRoom,h=j.joinLockedRoom,O=j.resetRoom,f={name:"",password:""};return Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("a",{href:"/",className:e.link,children:Object(g.jsx)(C.a,{className:e.button,variant:"contained",onClick:function(){return O(f)},children:"Rooms"})}),d.map((function(t,n){return t.password?Object(g.jsxs)("div",{children:[Object(g.jsxs)(C.a,{className:e.button2,variant:"contained",color:"secondary",onClick:m,children:["Join ",t.name," ",Object(g.jsx)(k.a,{})]},n),Object(g.jsxs)(y.a,{open:s,onClose:function(){return a(!1)},"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(L.a,{id:"form-dialog-title",children:"Password"}),Object(g.jsx)(J.a,{children:Object(g.jsx)(w.a,{onChange:function(e){return u(e.target.value)},autoFocus:!0,margin:"dense",id:"name",label:"Password",type:"password",fullWidth:!0})}),Object(g.jsx)(S.a,{children:Object(g.jsx)(C.a,{onClick:function(){h(t,l),a(!1)},color:"primary",children:"Submit"})})]})]}):Object(g.jsxs)(C.a,{className:e.button2,variant:"contained",color:"secondary",onClick:function(){return b(t)},children:["Join ",t.name]},n)}))]})},D=function(){var e=Object(o.useContext)(x),t=e.messages,n=e.sendMessage,s=Object(o.useState)(""),a=Object(i.a)(s,2),c=a[0],r=a[1],l=Object(o.useRef)(null);return Object(o.useEffect)((function(){l.current.scrollIntoView({block:"nearest",behavior:"smooth"})})),Object(g.jsxs)("div",{className:"Chat",children:[Object(g.jsx)(M,{}),Object(g.jsxs)("div",{id:"messages",children:[t.map((function(e,t){return Object(g.jsx)("div",{children:Object(g.jsx)("div",{children:e})},t)})),Object(g.jsx)("div",{ref:l,style:{height:"0",padding:"0"}})]}),Object(g.jsxs)("form",{id:"form",onSubmit:function(e){e.preventDefault(),r(""),n(c)},children:[Object(g.jsx)("input",{id:"input",value:c,onChange:function(e){r(e.target.value)},placeholder:"Say something..."}),Object(g.jsx)("button",{children:"SEND"})]})]})},E=n(196),U=n(198),W=n(96),I=Object(N.a)((function(e){return{link:{textDecoration:"none"},button:{margin:"0.5rem",fontWeight:"bold"},text:{margin:"0.5rem"}}}));var F=function(){var e=I(),t=Object(o.useContext)(x),n=t.username,s=t.rooms,a=t.room,c=t.getUsername,l=t.joinRoom,u=t.joinLockedRoom,m=t.setPassword,j=t.setRoom,d=Object(o.useState)(!1),b=Object(i.a)(d,2),h=b[0],O=b[1],f=Object(o.useState)(!1),p=Object(i.a)(f,2),v=p[0],R=p[1],N=Object(o.useState)(""),P=Object(i.a)(N,2),M=P[0],D=P[1],F=function(){R(!0)};return Object(g.jsxs)("div",{className:"Start",children:[Object(g.jsx)(w.a,{value:n,label:"Username",onChange:function(e){return c(e.target.value)}}),Object(g.jsx)(w.a,{label:"Room",onChange:function(e){return j(e.target.value)}}),Object(g.jsx)(E.a,{control:Object(g.jsx)(U.a,{onChange:function(){return O(!h)},name:"checkedB",color:"primary"}),label:"Private room"}),h?Object(g.jsx)(w.a,{type:"password",label:"Password",onChange:function(e){return m(e.target.value)}}):null,a.name.length>0&&n.length>0?Object(g.jsx)(r.b,{className:e.link,to:"/".concat(a.name),children:Object(g.jsx)(C.a,{onClick:function(){l(a)},className:e.button,variant:"contained",color:"primary",children:"Create room"})}):Object(g.jsx)(C.a,{disabled:!0,className:e.button,variant:"contained",color:"primary",children:"Create room"}),s.length>0?Object(g.jsx)(W.a,{className:e.text,variant:"h6",children:"Join existing rooms"}):null,n.length>0?s.map((function(t,n){return t.password?Object(g.jsxs)("div",{children:[Object(g.jsxs)(C.a,{className:e.button,variant:"contained",color:"secondary",onClick:F,children:["Join ",t.name," ",Object(g.jsx)(k.a,{})]},n),Object(g.jsxs)(y.a,{open:v,onClose:function(){return R(!1)},"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(L.a,{id:"form-dialog-title",children:"Password"}),Object(g.jsx)(J.a,{children:Object(g.jsx)(w.a,{onChange:function(e){return D(e.target.value)},autoFocus:!0,margin:"dense",id:"name",label:"Password",type:"password",fullWidth:!0})}),Object(g.jsx)(S.a,{children:Object(g.jsx)(C.a,{onClick:function(){u(t,M),R(!1)},color:"primary",children:"Submit"})})]})]}):Object(g.jsxs)(C.a,{className:e.button,variant:"contained",color:"secondary",onClick:function(){return l(t)},children:["Join ",t.name]},n)})):s.map((function(t,n){return t.password?Object(g.jsxs)(C.a,{disabled:!0,className:e.button,variant:"contained",color:"secondary",onClick:function(){return u(t)},children:["Join ",t.name," ",Object(g.jsx)(k.a,{})]},n):Object(g.jsxs)(C.a,{disabled:!0,className:e.button,variant:"contained",color:"secondary",onClick:function(){return l(t)},children:["Join ",t.name]},n)}))]})};var A=function(){return Object(g.jsx)(v,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(f.c,{children:[Object(g.jsx)(f.a,{exact:!0,path:"/",component:F}),Object(g.jsx)(f.a,{exact:!0,path:"/:roomName",component:D})]})})})};c.a.render(Object(g.jsx)(r.a,{children:Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(A,{})})}),document.getElementById("root"))},53:function(e,t,n){}},[[158,1,2]]]);
//# sourceMappingURL=main.9cde768f.chunk.js.map