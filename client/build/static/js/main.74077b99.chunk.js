(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),s=t(10),r=t.n(s),c=t(44),i=(t(48),t(13)),l=t(29),m=t(39),u=t(58),d=t(33),j=t(95),b=t(94),f=t(93),h=t.n(f)()(),O=t(11),g=t(4),x=Object(o.createContext)({getUsername:function(){},createRoom:function(){},handleNewMessage:function(){},sendMessage:function(){},setPassword:function(){},setRoom:function(){},joinRoom:function(){},joinLockedRoom:function(){},resetRoom:function(){},onJoinLockedRoomResponse:function(){}}),p=function(e){Object(j.a)(t,e);var n=Object(b.a)(t);function t(){var e;Object(u.a)(this,t);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=n.call.apply(n,[this].concat(a))).state={username:"guest",room:{name:"",password:""},rooms:[],messages:[]},e.updateRoomsList=function(n){e.setState({rooms:n})},e.getUsername=function(n){e.setState({username:n})},e.resetRoom=function(n){e.setState({room:n})},e.setRoom=function(n){e.setState({room:Object(m.a)(Object(m.a)({},e.state.room),{},{name:n})})},e.setPassword=function(n){e.setState((function(e){return{room:Object(m.a)(Object(m.a)({},e.room),{},{password:n})}}))},e.joinRoom=function(n){h.emit("join-room",{name:e.state.username,room:n})},e.joinLockedRoom=function(n,t){h.emit("join-room",{name:e.state.username,room:n,passwordPrompt:t})},e.onJoinLockedRoomResponse=function(n){var t=n.success,o=n.room;t?(e.setState({room:o}),e.setState({messages:[]}),e.props.history.push("/"+o.name)):alert("Wrong password!")},e.sendMessage=function(n){h.emit("send-message",{message:n,username:e.state.username,room:e.state.room.name})},e.handleNewMessage=function(n){e.setState({messages:[].concat(Object(l.a)(e.state.messages),[n])})},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){h.on("connect",(function(){return console.log("CONNECTED")})),h.on("message",this.handleNewMessage),h.on("all-rooms",this.updateRoomsList),h.on("disconnect",(function(){return console.log("DISCONNECTED")})),h.on("join-locked-room-response",this.onJoinLockedRoomResponse)}},{key:"render",value:function(){return Object(g.jsx)(x.Provider,{value:Object(m.a)(Object(m.a)({},this.state),{},{getUsername:this.getUsername,handleNewMessage:this.handleNewMessage,sendMessage:this.sendMessage,setPassword:this.setPassword,setRoom:this.setRoom,joinRoom:this.joinRoom,joinLockedRoom:this.joinLockedRoom,resetRoom:this.resetRoom,onJoinLockedRoomResponse:this.onJoinLockedRoomResponse}),children:this.props.children})}}]),t}(o.Component),v=Object(O.f)(p),R=t(52),k=t.n(R),C=t(189),w=t(196),N=t(186),y=t(199),S=t(194),L=t(193),J=t(192),P=Object(N.a)((function(e){return{container:{height:"10vh",backgroundColor:"#3f51b5",display:"flex",alignItems:"center",justifyContent:"center",position:"fixed",top:0,left:0,right:0,zIndex:999},link:{textDecoration:"none"},button:{marginLeft:"1rem",marginRight:"1rem",backgroundColor:"aliceblue",fontWeight:"bold"},button2:{marginLeft:"1rem",marginRight:"1rem",fontWeight:"bold"},textField:{marginLeft:"1rem",marginRight:"1rem"}}})),M=function(){var e=P(),n=Object(o.useState)(!1),t=Object(i.a)(n,2),a=t[0],s=t[1],r=Object(o.useState)(""),c=Object(i.a)(r,2),l=c[0],m=c[1],u=function(){s(!0)},d=Object(o.useContext)(x),j=d.rooms,b=d.joinRoom,f=d.joinLockedRoom,h=d.resetRoom,O={name:"",password:""};return Object(g.jsxs)("div",{className:e.container,children:[Object(g.jsx)("a",{href:"/",className:e.link,children:Object(g.jsx)(C.a,{className:e.button,variant:"contained",onClick:function(){return h(O)},children:"Rooms"})}),j.map((function(n,t){return n.password?Object(g.jsxs)("div",{children:[Object(g.jsxs)(C.a,{className:e.button2,variant:"contained",color:"secondary",onClick:u,children:["Join ",n.name," ",Object(g.jsx)(k.a,{})]},t),Object(g.jsxs)(y.a,{open:a,onClose:function(){return s(!1)},"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(J.a,{id:"form-dialog-title",children:"Password"}),Object(g.jsx)(L.a,{children:Object(g.jsx)(w.a,{onChange:function(e){return m(e.target.value)},autoFocus:!0,margin:"dense",id:"name",label:"Password",type:"password",fullWidth:!0})}),Object(g.jsx)(S.a,{children:Object(g.jsx)(C.a,{onClick:function(){f(n,l),s(!1)},color:"primary",children:"Submit"})})]})]}):Object(g.jsxs)(C.a,{className:e.button2,variant:"contained",color:"secondary",onClick:function(){return b(n)},children:["Join ",n.name]},t)}))]})},D=Object(N.a)((function(e){return{button:{background:"#f50057",border:"none",padding:"0.5rem 1rem",margin:"0.25rem",borderRadius:"3px",outline:"none",color:"#fff",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},form:{background:"#3f51b5",padding:"0.25rem",position:"fixed",bottom:0,left:0,right:0,display:"flex",boxSizing:"border-box",backdropFilter:"blur(10px)"},input:{border:"none",padding:"0 1rem",flexGrow:1,borderRadius:"2rem",margin:"0.25rem",fontSize:"1rem","&:focus":{outline:"none"}}}})),E=function(){var e=D(),n=Object(o.useContext)(x),t=n.messages,a=n.sendMessage,s=Object(o.useState)(""),r=Object(i.a)(s,2),c=r[0],l=r[1],m=Object(o.useRef)(null),u=Object(o.useRef)(null);return Object(o.useEffect)((function(){m.current.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"})})),Object(g.jsxs)("div",{className:"Chat",children:[Object(g.jsx)(M,{}),Object(g.jsxs)("div",{id:"messages",children:[t.map((function(e,n){return Object(g.jsx)("div",{children:Object(g.jsx)("div",{children:e})},n)})),Object(g.jsx)("div",{ref:m,style:{height:"0",padding:"0"}})]}),Object(g.jsxs)("form",{className:e.form,onSubmit:function(e){e.preventDefault(),l(u.value),a(c),l("")},children:[Object(g.jsx)("input",{ref:u,className:e.input,value:c,placeholder:"Say something..."}),Object(g.jsx)("button",{className:e.button,children:"SEND"})]})]})},W=t(195),U=t(197),I=t(97),z=Object(N.a)((function(e){return{link:{textDecoration:"none"},button:{margin:"0.5rem",fontWeight:"bold"},text:{margin:"0.5rem"}}}));var F=function(){var e=z(),n=Object(o.useContext)(x),t=n.username,a=n.rooms,s=n.room,r=n.getUsername,l=n.joinRoom,m=n.joinLockedRoom,u=n.setPassword,d=n.setRoom,j=Object(o.useState)(!1),b=Object(i.a)(j,2),f=b[0],h=b[1],O=Object(o.useState)(!1),p=Object(i.a)(O,2),v=p[0],R=p[1],N=Object(o.useState)(""),P=Object(i.a)(N,2),M=P[0],D=P[1],E=function(){R(!0)};return Object(g.jsxs)("div",{className:"Rooms",children:[Object(g.jsx)(w.a,{value:t,label:"Username",onChange:function(e){return r(e.target.value)}}),Object(g.jsx)(w.a,{label:"Room",onChange:function(e){return d(e.target.value)}}),Object(g.jsx)(W.a,{control:Object(g.jsx)(U.a,{onChange:function(){return h(!f)},name:"checkedB",color:"primary"}),label:"Private room"}),f?Object(g.jsx)(w.a,{type:"password",label:"Password",onChange:function(e){return u(e.target.value)}}):null,s.name.length>0&&t.length>0?Object(g.jsx)(c.b,{className:e.link,to:"/".concat(s.name),children:Object(g.jsx)(C.a,{onClick:function(){l(s)},className:e.button,variant:"contained",color:"primary",children:"Create room"})}):Object(g.jsx)(C.a,{disabled:!0,className:e.button,variant:"contained",color:"primary",children:"Create room"}),a.length>0?Object(g.jsx)(I.a,{className:e.text,variant:"h6",children:"Join existing rooms"}):null,t.length>0?a.map((function(n,t){return n.password?Object(g.jsxs)("div",{children:[Object(g.jsxs)(C.a,{className:e.button,variant:"contained",color:"secondary",onClick:E,children:["Join ",n.name," ",Object(g.jsx)(k.a,{})]},t),Object(g.jsxs)(y.a,{open:v,onClose:function(){return R(!1)},"aria-labelledby":"form-dialog-title",children:[Object(g.jsx)(J.a,{id:"form-dialog-title",children:"Password"}),Object(g.jsx)(L.a,{children:Object(g.jsx)(w.a,{onChange:function(e){return D(e.target.value)},autoFocus:!0,margin:"dense",id:"name",label:"Password",type:"password",fullWidth:!0})}),Object(g.jsx)(S.a,{children:Object(g.jsx)(C.a,{onClick:function(){m(n,M),R(!1)},color:"primary",children:"Submit"})})]})]}):Object(g.jsxs)(C.a,{className:e.button,variant:"contained",color:"secondary",onClick:function(){return l(n)},children:["Join ",n.name]},t)})):a.map((function(n,t){return n.password?Object(g.jsxs)(C.a,{disabled:!0,className:e.button,variant:"contained",color:"secondary",onClick:function(){return m(n)},children:["Join ",n.name," ",Object(g.jsx)(k.a,{})]},t):Object(g.jsxs)(C.a,{disabled:!0,className:e.button,variant:"contained",color:"secondary",onClick:function(){return l(n)},children:["Join ",n.name]},t)}))]})};var A=function(){return Object(g.jsx)(v,{children:Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(O.c,{children:[Object(g.jsx)(O.a,{exact:!0,path:"/",component:F}),Object(g.jsx)(O.a,{exact:!0,path:"/:roomName",component:E})]})})})};r.a.render(Object(g.jsx)(c.a,{children:Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(A,{})})}),document.getElementById("root"))},48:function(e,n,t){}},[[157,1,2]]]);
//# sourceMappingURL=main.74077b99.chunk.js.map